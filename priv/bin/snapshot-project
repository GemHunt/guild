#!/bin/bash -eu

project_dir="${1}"
guild_dir="${2}"
runs_root="${3}"

dest_dir="$guild_dir/project"

snapshot-project() {
    mkdir -p "$dest_dir"
    rsync -am \
          --exclude="/$runs_root" \
          --include="*/" \
          --include="/Guild" \
          --include="*.py" \
          --exclude="*" \
          "$project_dir/" "$dest_dir/"
}

snapshot-project
